# ğŸš€ å‘½ä»¤ç¶²ç¾…ï¼ˆStatement Coverageï¼‰- å®Ÿå‹™é©ç”¨ã‚¬ã‚¤ãƒ‰

## ğŸ¯ å®Ÿå‹™ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®å‘½ä»¤ç¶²ç¾…é©ç”¨

### ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦æ¨¡åˆ¥é©ç”¨æ–¹é‡

#### ğŸ”¥ å°è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆï½10ä¸‡è¡Œï¼‰
- **ç›®æ¨™ç¶²ç¾…ç‡**: 90-95%
- **é©ç”¨ç¯„å›²**: å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
- **æ¸¬å®šé »åº¦**: CI/CDæ¯å›
- **ãƒ„ãƒ¼ãƒ«**: è»½é‡ãªã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ„ãƒ¼ãƒ«ï¼ˆJaCoCoã€Istanbulç­‰ï¼‰

#### ğŸ¢ ä¸­è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ10-100ä¸‡è¡Œï¼‰
- **ç›®æ¨™ç¶²ç¾…ç‡**: 85-90%
- **é©ç”¨ç¯„å›²**: ã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å„ªå…ˆ
- **æ¸¬å®šé »åº¦**: æ—¥æ¬¡ãƒ“ãƒ«ãƒ‰
- **ãƒ„ãƒ¼ãƒ«**: çµ±åˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆSonarQubeç­‰ï¼‰

#### ğŸ­ å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ100ä¸‡è¡Œï½ï¼‰
- **ç›®æ¨™ç¶²ç¾…ç‡**: 80-85%
- **é©ç”¨ç¯„å›²**: ãƒ“ã‚¸ãƒã‚¹ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«éƒ¨åˆ†
- **æ¸¬å®šé »åº¦**: é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
- **ãƒ„ãƒ¼ãƒ«**: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘ãƒ„ãƒ¼ãƒ«

---

## ğŸ”— ä»–ãƒ†ã‚¹ãƒˆæŠ€æ³•ã¨ã®åŠ¹æœçš„ãªçµ„ã¿åˆã‚ã›

### ğŸ¯ ãƒ–ãƒ©ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æŠ€æ³•ã¨ã®é€£æº

#### ğŸ’¡ åŒå€¤åˆ†å‰² + å‘½ä»¤ç¶²ç¾…
```java
// åŒå€¤åˆ†å‰²ã§è¨­è¨ˆã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒå‘½ä»¤ç¶²ç¾…ã‚’æº€ãŸã™ã‹æ¤œè¨¼
public class ScoreCalculator {
    public String getGrade(int score) {
        if (score >= 90) return "A";        // åŒå€¤: 90-100
        else if (score >= 80) return "B";   // åŒå€¤: 80-89
        else if (score >= 70) return "C";   // åŒå€¤: 70-79
        else if (score >= 60) return "D";   // åŒå€¤: 60-69
        else return "F";                    // åŒå€¤: 0-59
    }
}

// åŒå€¤åˆ†å‰²ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
@Test
public void testGrade_EquivalencePartitioning() {
    assertEquals("A", calculator.getGrade(95));  // 90-100ã®ä»£è¡¨å€¤
    assertEquals("B", calculator.getGrade(85));  // 80-89ã®ä»£è¡¨å€¤
    assertEquals("C", calculator.getGrade(75));  // 70-79ã®ä»£è¡¨å€¤
    assertEquals("D", calculator.getGrade(65));  // 60-69ã®ä»£è¡¨å€¤
    assertEquals("F", calculator.getGrade(45));  // 0-59ã®ä»£è¡¨å€¤
}
// â†’ çµæœ: å‘½ä»¤ç¶²ç¾…100%é”æˆ
```

#### ğŸ’¡ å¢ƒç•Œå€¤åˆ†æ + å‘½ä»¤ç¶²ç¾…
```java
// å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆãŒå‘½ä»¤ç¶²ç¾…ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’åˆ†æ
@Test
public void testGrade_BoundaryValues() {
    // å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ
    assertEquals("A", calculator.getGrade(90));  // å¢ƒç•Œå€¤
    assertEquals("B", calculator.getGrade(89));  // å¢ƒç•Œå€¤
    assertEquals("B", calculator.getGrade(80));  // å¢ƒç•Œå€¤
    assertEquals("C", calculator.getGrade(79));  // å¢ƒç•Œå€¤
    // ...
}
// â†’ å¢ƒç•Œå€¤ã ã‘ã§ã‚‚å‘½ä»¤ç¶²ç¾…100%å¯èƒ½
```

### ğŸ¯ ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹æŠ€æ³•ã¨ã®é€£æº

#### ğŸ’¡ å‘½ä»¤ç¶²ç¾… â†’ åˆ†å²ç¶²ç¾…ã¸ã®ç™ºå±•
```java
public class LoginValidator {
    public boolean validateLogin(String user, String pass) {
        if (user != null && pass != null) {           // åˆ†å²1
            if (user.length() > 0 && pass.length() >= 8) {  // åˆ†å²2
                return authenticateUser(user, pass);    // åˆ†å²3
            }
        }
        return false;
    }
}

// å‘½ä»¤ç¶²ç¾…ã®ã¿ï¼ˆä¸ååˆ†ï¼‰
@Test
public void testValidateLogin_StatementCoverage() {
    assertTrue(validator.validateLogin("user", "password"));   // true ãƒ‘ã‚¹ã®ã¿
}

// åˆ†å²ç¶²ç¾…ï¼ˆæ¨å¥¨ï¼‰
@Test
public void testValidateLogin_BranchCoverage() {
    // å…¨åˆ†å²ã® true/false ã‚’ãƒ†ã‚¹ãƒˆ
    assertTrue(validator.validateLogin("user", "password"));    // å…¨true
    assertFalse(validator.validateLogin(null, "password"));     // åˆ†å²1 false
    assertFalse(validator.validateLogin("user", "short"));      // åˆ†å²2 false
}
```

---

## ğŸ› ï¸ å®Ÿå‹™ã§ã®ãƒ„ãƒ¼ãƒ«æ´»ç”¨æˆ¦ç•¥

### ğŸ“Š CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆ

#### ğŸ’¡ Jenkinsçµ±åˆä¾‹
```groovy
pipeline {
    stages {
        stage('Test & Coverage') {
            steps {
                script {
                    // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                    sh 'mvn clean test'
                    
                    // ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
                    sh 'mvn jacoco:report'
                    
                    // ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒã‚§ãƒƒã‚¯
                    publishHTML([
                        allowMissing: false,
                        alwaysLinkToLastBuild: true,
                        keepAll: true,
                        reportDir: 'target/site/jacoco',
                        reportFiles: 'index.html',
                        reportName: 'Coverage Report'
                    ])
                    
                    // å“è³ªã‚²ãƒ¼ãƒˆ
                    if (currentBuild.result == null) {
                        def coverage = readFile('target/site/jacoco/index.html')
                        if (!coverage.contains('90%')) {
                            error('Coverage below 90%')
                        }
                    }
                }
            }
        }
    }
}
```

#### ğŸ’¡ GitHub Actionsçµ±åˆä¾‹
```yaml
name: Test Coverage
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    
    - name: Setup Java
      uses: actions/setup-java@v2
      with:
        java-version: '11'
        
    - name: Run tests with coverage
      run: mvn clean test jacoco:report
      
    - name: Upload coverage to Codecov
      uses: codecov/codecov-action@v1
      with:
        file: ./target/site/jacoco/jacoco.xml
        
    - name: Coverage check
      run: |
        COVERAGE=$(grep -Po 'line-rate="\\K[^"]*' target/site/jacoco/jacoco.xml | head -1)
        if (( $(echo "$COVERAGE < 0.90" | bc -l) )); then
          echo "Coverage $COVERAGE is below 90%"
          exit 1
        fi
```

### ğŸ“ˆ ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®æ´»ç”¨

#### ğŸ’¡ ç¶™ç¶šçš„æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹
```markdown
## é€±æ¬¡ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒ“ãƒ¥ãƒ¼

### 1. ç¾çŠ¶åˆ†æ
- ç¾åœ¨ã®å‘½ä»¤ç¶²ç¾…ç‡: 87%
- å‰é€±æ¯”: +2%
- æœªã‚«ãƒãƒ¼è¡Œæ•°: 234è¡Œ

### 2. æœªã‚«ãƒãƒ¼ç®‡æ‰€åˆ†æ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: 45%ï¼ˆé«˜å„ªå…ˆåº¦ï¼‰
- åˆæœŸåŒ–å‡¦ç†: 23%ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰
- ãƒ­ã‚°å‡ºåŠ›: 32%ï¼ˆä½å„ªå…ˆåº¦ï¼‰

### 3. æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 
- [ ] åˆæœŸåŒ–ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆä½œæˆ
- [ ] æ¬¡é€±ç›®æ¨™: 90%é”æˆ
```

---

## ğŸ¯ å®Ÿå‹™ã§ã®å“è³ªåŸºæº–è¨­å®š

### ğŸ“Š æ¥­ç•Œåˆ¥å“è³ªåŸºæº–

#### ğŸ¥ åŒ»ç™‚ãƒ»é‡‘èã‚·ã‚¹ãƒ†ãƒ 
- **å‘½ä»¤ç¶²ç¾…**: 95%ä»¥ä¸Š
- **åˆ†å²ç¶²ç¾…**: 90%ä»¥ä¸Š
- **æ¡ä»¶ç¶²ç¾…**: 85%ä»¥ä¸Š
- **æ ¹æ‹ **: äººå‘½ãƒ»è²¡ç”£ã«é–¢ã‚ã‚‹é«˜ä¿¡é ¼æ€§è¦æ±‚

#### ğŸš— è‡ªå‹•è»Šãƒ»èˆªç©ºã‚·ã‚¹ãƒ†ãƒ 
- **å‘½ä»¤ç¶²ç¾…**: 100%ï¼ˆMC/DCæ¨å¥¨ï¼‰
- **åˆ†å²ç¶²ç¾…**: 100%
- **æ ¹æ‹ **: ISO 26262ã€DO-178Cæº–æ‹ 

#### ğŸŒ Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- **å‘½ä»¤ç¶²ç¾…**: 80-90%
- **åˆ†å²ç¶²ç¾…**: 75-85%
- **æ ¹æ‹ **: é–‹ç™ºé€Ÿåº¦ã¨å“è³ªã®ãƒãƒ©ãƒ³ã‚¹

#### ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª
- **å‘½ä»¤ç¶²ç¾…**: 75-85%
- **åˆ†å²ç¶²ç¾…**: 70-80%
- **æ ¹æ‹ **: é »ç¹ãªãƒªãƒªãƒ¼ã‚¹ã‚µã‚¤ã‚¯ãƒ«

### ğŸ¯ é™¤å¤–ã™ã¹ãã‚³ãƒ¼ãƒ‰

#### ğŸ’¡ ã‚«ãƒãƒ¬ãƒƒã‚¸é™¤å¤–ä¾‹
```java
// @ExcludeFromCodeCoverage  // ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§é™¤å¤–
public class Logger {
    // ãƒ­ã‚°å‡ºåŠ›ã®ã¿ã®ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆãƒ†ã‚¹ãƒˆå›°é›£ï¼‰
    private void writeLog(String message) {
        System.out.println(new Date() + ": " + message);
    }
    
    // ãƒ‡ãƒãƒƒã‚°å°‚ç”¨ãƒ¡ã‚½ãƒƒãƒ‰
    public void debugDump() {
        // å®Ÿè£…è©³ç´°...
    }
    
    // åˆ°é”ä¸å¯èƒ½ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
    public void process() {
        try {
            // ãƒ¡ã‚¤ãƒ³å‡¦ç†
        } catch (UnreachableException e) {
            // å®Ÿéš›ã«ã¯ç™ºç”Ÿã—ãªã„ä¾‹å¤–
            throw new RuntimeException("This should never happen", e);
        }
    }
}
```

---

## ğŸš¨ å®Ÿå‹™ã§ã®æ³¨æ„ç‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### âš ï¸ ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´

#### ğŸ’£ ã‚«ãƒãƒ¬ãƒƒã‚¸è‡³ä¸Šä¸»ç¾©ã®å›é¿
```java
// æ‚ªã„ä¾‹ï¼šã‚«ãƒãƒ¬ãƒƒã‚¸ã®ãŸã‚ã ã‘ã®ãƒ†ã‚¹ãƒˆ
@Test
public void testForCoverageOnly() {
    new Calculator().divide(10, 0);  // ä¾‹å¤–ç™ºç”Ÿã™ã‚‹ã ã‘
    // ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãªã— â†’ æ„å‘³ã®ãªã„ãƒ†ã‚¹ãƒˆ
}

// è‰¯ã„ä¾‹ï¼šæ„å‘³ã®ã‚ã‚‹ãƒ†ã‚¹ãƒˆ
@Test
public void testDivideByZero_ThrowsException() {
    Calculator calc = new Calculator();
    
    ArithmeticException exception = assertThrows(
        ArithmeticException.class, 
        () -> calc.divide(10, 0)
    );
    
    assertEquals("Division by zero", exception.getMessage());
}
```

#### ğŸ’£ ãƒ†ã‚¹ãƒˆå¯èƒ½æ€§ã‚’è€ƒæ…®ã—ãªã„è¨­è¨ˆ
```java
// æ‚ªã„ä¾‹ï¼šãƒ†ã‚¹ãƒˆã—ã«ãã„è¨­è¨ˆ
public class UserService {
    public void createUser(String name) {
        User user = new User(name);
        user.setCreatedAt(new Date());  // ç¾åœ¨æ™‚åˆ»ï¼ˆãƒ†ã‚¹ãƒˆå›°é›£ï¼‰
        database.save(user);           // å¤–éƒ¨ä¾å­˜ï¼ˆãƒ†ã‚¹ãƒˆå›°é›£ï¼‰
    }
}

// è‰¯ã„ä¾‹ï¼šãƒ†ã‚¹ãƒˆå¯èƒ½ãªè¨­è¨ˆ
public class UserService {
    private final Clock clock;
    private final UserRepository repository;
    
    // ä¾å­˜æ€§æ³¨å…¥ã§ãƒ†ã‚¹ãƒˆå¯èƒ½ã«
    public UserService(Clock clock, UserRepository repository) {
        this.clock = clock;
        this.repository = repository;
    }
    
    public void createUser(String name) {
        User user = new User(name);
        user.setCreatedAt(clock.now());  // ãƒ¢ãƒƒã‚¯å¯èƒ½
        repository.save(user);           // ãƒ¢ãƒƒã‚¯å¯èƒ½
    }
}
```

### ğŸ¯ åŠ¹æœçš„ãªã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Šæˆ¦ç•¥

#### ğŸ’¡ æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
1. **Phase 1**: ä¸»è¦ãƒ•ãƒ­ãƒ¼ã®å‘½ä»¤ç¶²ç¾…ï¼ˆ70%ç›®æ¨™ï¼‰
2. **Phase 2**: ç•°å¸¸ç³»ã®å‘½ä»¤ç¶²ç¾…ï¼ˆ85%ç›®æ¨™ï¼‰
3. **Phase 3**: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®å‘½ä»¤ç¶²ç¾…ï¼ˆ90%ç›®æ¨™ï¼‰
4. **Phase 4**: åˆ†å²ç¶²ç¾…ã¸ã®ç§»è¡Œ

#### ğŸ’¡ ãƒãƒ¼ãƒ å†…ã§ã®åˆæ„å½¢æˆ
```markdown
## ãƒãƒ¼ãƒ å†…ã‚«ãƒãƒ¬ãƒƒã‚¸åŸºæº–

### æœ€ä½åŸºæº–
- æ–°è¦æ©Ÿèƒ½: å‘½ä»¤ç¶²ç¾… 85%ä»¥ä¸Š
- æ—¢å­˜æ©Ÿèƒ½ä¿®æ­£: å‘½ä»¤ç¶²ç¾… 80%ä»¥ä¸Š
- ãƒã‚°ä¿®æ­£: è©²å½“ç®‡æ‰€ 100%

### PRæ‰¿èªåŸºæº–
- ã‚«ãƒãƒ¬ãƒƒã‚¸ä½ä¸‹ãªã—
- æ–°è¦è¿½åŠ è¡Œã® 90%ä»¥ä¸Šã‚«ãƒãƒ¼
- ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆæ·»ä»˜å¿…é ˆ

### ä¾‹å¤–å‡¦ç†
- ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰: æ®µéšçš„æ”¹å–„
- å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª: é™¤å¤–å¯¾è±¡
- è¨­å®šãƒ»å®šæ•°ã‚¯ãƒ©ã‚¹: é™¤å¤–å¯¾è±¡
```

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼šåˆ†å²ç¶²ç¾…ã¸ã®ç™ºå±•

å‘½ä»¤ç¶²ç¾…ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã‚‰ã€æ¬¡ã¯**åˆ†å²ç¶²ç¾…ï¼ˆBranch Coverageï¼‰**ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼š

### ğŸ”„ å­¦ç¿’ã®é€£ç¶šæ€§
1. **å‘½ä»¤ç¶²ç¾…ã®èª²é¡Œ**: æ¡ä»¶ã®çœŸå½ä¸¡æ–¹ã‚’ãƒ†ã‚¹ãƒˆã—ãªã„
2. **åˆ†å²ç¶²ç¾…ã®ä¾¡å€¤**: ã‚ˆã‚Šå³å¯†ãªæ¡ä»¶åˆ†å²ãƒ†ã‚¹ãƒˆ
3. **å®Ÿå‹™ã§ã®ä½¿ã„åˆ†ã‘**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‰¹æ€§ã«å¿œã˜ãŸé©ç”¨

### ğŸ“š æ¨å¥¨å­¦ç¿’é †åº
1. åˆ†å²ç¶²ç¾…ã®ç†è«–å­¦ç¿’
2. å‘½ä»¤ç¶²ç¾…ã¨ã®å·®ç•°ç†è§£
3. åˆ†å²ç¶²ç¾…ã®å®Ÿè·µæ¼”ç¿’
4. æ¡ä»¶ç¶²ç¾…ãƒ»MC/DCã¸ã®ç™ºå±•

å‘½ä»¤ç¶²ç¾…ã¯**ãƒ›ãƒ¯ã‚¤ãƒˆãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆã®åŸºç¤**ã§ã™ã€‚å®Ÿå‹™ã§ç¶™ç¶šçš„ã«æ´»ç”¨ã—ã€ã‚ˆã‚Šé«˜åº¦ãªç¶²ç¾…åŸºæº–ã¸ã®åœŸå°ã¨ã—ã¦ãã ã•ã„ã€‚
