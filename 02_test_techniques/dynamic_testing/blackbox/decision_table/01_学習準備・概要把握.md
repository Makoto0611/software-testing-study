# 📝 デシジョンテーブル学習準備・概要把握

## 🎯 デシジョンテーブルとは？

### 基本定義
**デシジョンテーブル**は、複数の条件の組み合わせによって決まるアクション（動作）を**体系的に整理するテスト技法**です。

### 基本構造
```
│ 条件/アクション │ ルール1 │ ルール2 │ ルール3 │
├──────────├────────├────────├────────┤
│ 条件1: 年齢   │ <20歳  │ ≥20歳  │ <20歳  │
│ 条件2: 会員   │ 一般   │ 一般   │ VIP    │
├──────────├────────├────────├────────┤
│ アクション1: 割引 │ 0%     │ 10%    │ 5%     │
│ アクション2: 特典 │ なし   │ なし   │ あり   │
└──────────┴────────┴────────┴────────┘

上部: 条件部（入力条件）
下部: アクション部（期待する動作）
```

---

## 🚀 いつ使用するべきか？

### デシジョンテーブルが最適なケース
✅ **複数条件の組み合わせ**が複雑な場合  
✅ **ビジネスルール**が多数の条件に依存する場合  
✅ **IF-THEN-ELSE文**が多段にネストしている場合  
✅ **仕様の曖昧性**を解消したい場合  
✅ **条件の網羅性確認**が必要な場合

### 具体例
```
○ 適用例:
- 料金計算システム（会員ランク×金額×期間×決済方法）
- 権限管理システム（役職×部署×時間帯×アクセス種別）
- 保険料算出（年齢×車種×事故歴×地域）
- ワークフロー承認（金額×種別×緊急度×承認者状況）

× 不適切例:
- 単一条件の入力値検証（同値分割で十分）
- 数値範囲の境界テスト（境界値分析で十分）
- 状態遷移テスト（状態遷移図が最適）
```

---

## 📊 他のテスト技法との使い分け

### 技法別適用指針

| テスト技法 | 適用場面 | 条件数 | 使い分けの目安 |
|------------|----------|----------|----------------|
| **同値分割法** | 単一条件の入力値分類 | 1個 | 入力フィールドの基本テスト |
| **境界値分析** | 数値範囲の境界確認 | 1個 | 数値入力の精密テスト |
| **デシジョンテーブル** | **複数条件の組み合わせ** | **2-10個** | **ビジネスロジックテスト** |
| **状態遷移テスト** | システムの状態変化 | - | UIフロー・ワークフロー |
| **ペアワイズテスト** | 組み合わせ爆発の効率化 | 5個以上 | 大量パラメータテスト |

### 組み合わせパターン例

**ケース1: ユーザー登録システム**
```
歩 1: 同値分割 → 各入力フィールドの基本チェック
  - メールアドレス: 有効形式/無効形式
  - パスワード: 強度条件を満たす/満たさない
  - 年齢: 18歳以上/18歳未満

歩 2: デシジョンテーブル → 登録可否の最終判定
  - メール形式 × パスワード強度 × 年齢条件 → 登録結果
```

**ケース2: ECサイト料金計算**
```
歩 1: 境界値分析 → 金額範囲の精密チェック
  - 購入金額: 9,999円/10,000円/10,001円

歩 2: デシジョンテーブル → 割引率の組み合わせ計算
  - 会員ランク × 購入金額 × キャンペーン → 割引率
```

---

## 🛠 基本用語の理解

### 核心概念

| 用語 | 定義 | 具体例 |
|------|------|--------|
| **条件（Condition）** | 判定に影響する入力要素 | 「年齢」「会員ランク」 |
| **アクション（Action）** | 条件に対応する期待結果 | 「割引率」「アクセス許可」 |
| **ルール（Rule）** | 条件とアクションの組み合わせ1セット | R1, R2, R3... |
| **網羅性（Coverage）** | 全条件の組み合わせを網羅する度合い | 2^n パターンのカバー率 |
| **DON'T CARE** | 特定ルールで関係ない条件 | 「-」で表現 |

### 効果的な作成手順

```
Step 1: 条件の特定
  → 仕様から判定に影響する全ての要素を洗い出し

Step 2: 条件の値域設定
  → 各条件の取り得る値（True/False、具体値）を決定

Step 3: ルール作成
  → 全ての条件の組み合わせパターンを作成

Step 4: アクション定義
  → 各ルールに対応する期待される動作を定義

Step 5: 妥当性確認
  → 全組み合わせがカバーされ、矛盾なし、仕様整合性確認
```

---

## 📈 実務での活用メリット

### 1. **仕様の曖昧性解消**
- 複雑な条件文を明確なルールに変換
- ステークホルダー間の認識齟齬を解消
- 仕様書の品質向上

### 2. **テストケース生成の効率化**
- 網羅的なテストケースを体系的に生成
- 重複・漏れのないテスト設計
- テストの理由・目的が明確

### 3. **メンテナンス性の向上**
- 仕様変更時の影響範囲を明確化
- 新しい条件追加時の網羅性確保
- ドキュメントとしての価値

### 4. **コミュニケーションツール**
- 開発者とテスターの共通言語
- ビジネスサイドとの話し合いに活用
- コードレビューでのロジック確認

---

## 🚀 学習の成果目標

### 基本レベル（入門）
- [ ] 3条件までのシンプルなデシジョンテーブル作成
- [ ] True/Falseの2値条件での基本操作
- [ ] 網羅性の概念理解

### 実務レベル（目標）
- [ ] 4-6条件の複雑なデシジョンテーブル作成
- [ ] DON'T CAREを活用した効率的な簡略化
- [ ] 実際の仕様書からの要件抽出
- [ ] 他のテスト技法との組み合わせ

### 上級レベル（エキスパート）
- [ ] 8条件以上の大規模テーブル管理
- [ ] 条件間の複雑な依存関係処理
- [ ] テスト自動化ツールとの連携
- [ ] パフォーマンスを考慮した最適化

---

## 📚 次回学習への準備

### 確認しておくべき特定ケース
```
○ 普段の作業で遭う複雑な判定ロジック
  - ユーザー権限管理
  - 料金計算システム  
  - ワークフロー承認
  - バリデーションルール

○ 現在取り組んでいるプロジェクトの複雑部分
  - 仕様書で曖昧な部分
  - IF-THEN-ELSEが多段になっている箇所
  - テストケース作成に時間がかかっている部分
```

### 学習準備物
- ✅ 上記のケースの具体例をいくつか思い出しておく  
- ✅ 簡単なケースで練習してみたい意欲  
- ✅ 集中して学習できる時間の確保（60-90分）

---

## 🎯 Laravel プロジェクトでの実用例

### よくある活用シーン
```php
// 1. ユーザー権限管理
class PermissionService {
    public function canAccess($user, $resource, $action, $timeZone) {
        // 役職 × リソース × アクション × 時間帯
        // → アクセス可否の判定
    }
}

// 2. 料金計算ロジック
class PricingService {
    public function calculateDiscount($memberType, $amount, $campaign, $paymentMethod) {
        // 会員種別 × 金額 × キャンペーン × 決済方法
        // → 割引率の算出
    }
}

// 3. バリデーションルール
class ValidationService {
    public function validateRegistration($age, $email, $terms, $region) {
        // 年齢 × メール × 利用規約 × 地域
        // → 登録可否の判定
    }
}
```

### デシジョンテーブル活用の効果
- **コードの可読性向上**: 複雑なIF文がテーブル化で理解しやすく
- **バグの減少**: 条件の漏れ・重複を事前に発見
- **仕様変更対応**: 新条件追加時の影響範囲が明確
- **テスト効率化**: 体系的なテストケース生成

---

## 🔗 関連リソース

### 学習の流れ
1. **次回**: `02_理論学習・基本演習.md` で詳細学習を開始
2. **実践**: `04_上級演習・実務レベル.md` で実務レベル習得
3. **応用**: `06_実務適用ガイド.md` でプロジェクト適用

### 参考技法
- **前提知識**: 同値分割法・境界値分析の基本理解
- **発展技法**: 状態遷移テスト・ペアワイズテストとの連携
- **実装技法**: Laravel でのビジネスロジック実装

---

*学習準備完了後、基本演習から開始してください*  
*推奨学習時間: 90分（理論30分 + 演習60分）*