# 📋 デシジョンテーブル 上級演習問題集

**作成日**: 2025年9月7日  
**分野**: ブラックボックステスト技法 > デシジョンテーブル  
**レベル**: 応用・実務レベル

## 🎯 学習目標
1. 複雑な条件組み合わせの整理
2. 実務レベルのビジネスルール適用
3. テストケース生成への応用

---

## 📚 【理論復習】デシジョンテーブル基本構造

| 条件/アクション | R1 | R2 | R3 | R4 |
|-----------------|----|----|----|----|  
| 条件1           |    |    |    |    |
| 条件2           |    |    |    |    |
| **アクション1** |    |    |    |    |
| **アクション2** |    |    |    |    |

*ルール番号: R1-R4 / 上段: 条件部 / 下段: アクション部*

### 作成手順
1. **条件特定**: 判定に影響する全ての条件を洗い出し
2. **値域設定**: 各条件の取り得る値を定義
3. **組み合わせ作成**: 全パターンを網羅（2^n通り）
4. **アクション定義**: 各ルールの期待動作を明確化

---

## 📝 【演習1】図書貸出システム - 継続中

### 問題設定
**図書貸出システム**の貸出判定ロジック

**仕様:**
- 条件1: 会員ステータス（有効/無効）
- 条件2: 延滞状況（なし/あり）
- 条件3: 予約状況（なし/あり）

**ビジネスルール:**
- 有効会員で延滞なしなら貸出可能
- 予約ありの場合は予約者のみ貸出可能
- 無効会員や延滞ありは貸出不可

### 【課題】解答をお願いします

**考え方のヒント:**
1. **組み合わせ数**: 3つの条件で2^3 = 8通り
2. **各条件の値**:
   - 会員ステータス: 有効(V)/無効(I)
   - 延滞状況: なし(N)/あり(A)
   - 予約状況: なし(N)/あり(A)

| 条件/アクション | R1 | R2 | R3 | R4 | R5 | R6 | R7 | R8 |
|----------------|----|----|----|----|----|----|----|----|  
| 会員ステータス |  ? |  ? |  ? |  ? |  ? |  ? |  ? |  ? |
| 延滞状況       |  ? |  ? |  ? |  ? |  ? |  ? |  ? |  ? |
| 予約状況       |  ? |  ? |  ? |  ? |  ? |  ? |  ? |  ? |
| **貸出可否**   |  ? |  ? |  ? |  ? |  ? |  ? |  ? |  ? |

*3条件 × 2値 = 2³ = 8通りの組み合わせ*

**ユーザー解答欄:**
[ここに解答を記載予定]

**正解と解説:**
[ユーザー解答後に記載]

---

## 📝 【演習2】ECサイト注文システム（実務レベル4条件）

### 問題設定
**ECサイト**の注文処理・配送判定システム

**ビジネス仕様:**
```
条件1: 在庫状況（在庫あり/在庫なし/予約可能/入荷待ち）
条件2: 支払方法（クレジット/代引き/銀行振込/電子マネー）  
条件3: 会員ランク（一般/ゴールド/プラチナ/VIP）
条件4: 注文金額（<3千/<1万/<3万/≥3万円）

ビジネスルール:
- 在庫ありなら即日発送、なしなら注文不可
- 予約可能なら予約注文として受付
- プラチナ・VIP会員は在庫なしでも優先手配
- 代引きは3万円以上で手数料発生
- クレジット・電子マネーは即時決済
- 銀行振込は入金確認後の発送
- VIP会員は全商品送料無料
- ゴールド以上は1万円以上で送料無料
```

### 【作成課題】実務レベルの条件整理
**Step1**: 4条件の全組み合わせ数を計算
**Step2**: ビジネス優先度による重要パターン特定
**Step3**: 注文可否・発送方法・料金計算のデシジョンテーブル作成

**解答記録エリア:**

■ 全組み合わせ数: 4×4×4×4 = **256通り** ← 管理困難！

■ 条件の優先度分析:
```
第1優先: 在庫状況（注文可否の基本条件）
第2優先: 会員ランク（特別扱いの判定）
第3優先: 支払方法（決済・発送フローの違い）
第4優先: 注文金額（手数料・送料の判定）
```

■ 実務的なデシジョンテーブル（重要パターン抽出版）:

| 条件/アクション | R1 | R2 | R3 | R4 | R5 | R6 | R7 | R8 | R9 | R10 |
|-----------|----|----|----|----|----|----|----|----|----|----|  
| 在庫状況 | あり | あり | なし | なし | 予約可 | 予約可 | 入荷待ち | あり | あり | あり |
| 会員ランク | 一般 | VIP | 一般 | プラチナ | 一般 | ゴールド | 一般 | 一般 | ゴールド | プラチナ |
| 支払方法 | クレジット | - | - | - | 代引き | クレジット | - | 代引き | 銀行振込 | 電子マネー |
| 注文金額 | <1万 | - | - | - | ≥3万 | <1万 | - | ≥3万 | ≥1万 | <3万 |
| **注文可否** | **○** | **○** | **×** | **○** | **予約○** | **予約○** | **×** | **○** | **○** | **○** |
| **発送タイミング** | **即日** | **即日** | **-** | **優先手配** | **入荷後** | **入荷後** | **-** | **即日** | **入金確認後** | **即日** |
| **送料** | **有料** | **無料** | **-** | **無料** | **有料** | **無料** | **-** | **有料** | **無料** | **無料** |
| **手数料** | **無料** | **無料** | **-** | **無料** | **500円** | **無料** | **-** | **500円** | **無料** | **無料** |

■ ポイント解説:
```
1. **在庫状況による基本分岐**
   - 在庫あり: 即日発送可能
   - 在庫なし: 一般会員は注文不可、上位会員は優先手配
   - 予約可能: 入荷後発送の予約注文
   - 入荷待ち: 注文受付停止

2. **会員ランク特典の階層化**
   - VIP: 全商品送料無料、在庫なし時も優先対応
   - プラチナ: 送料無料、在庫なし時も優先手配
   - ゴールド: 1万円以上送料無料
   - 一般: 基本料金体系

3. **支払方法による処理分岐**
   - クレジット・電子マネー: 即時決済→即発送
   - 代引き: 3万円以上で手数料500円
   - 銀行振込: 入金確認必要→発送遅延

4. **実務的な簡略化**
   - DON'T CARE（-）で無関係な条件を省略
   - ビジネス頻度の高いパターンを優先選定
   - 256パターン → 10パターンで主要ケースをカバー
```

---

## 📝 【演習3】ATM取引システム（上級レベル5条件）

### 問題設定
**銀行ATM**の取引処理・セキュリティ判定システム

**ビジネス仕様:**
```
条件1: 取引種別（残高照会/出金/入金/振込/その他）
条件2: 取引金額（<1万/<10万/<50万/≥50万円）
条件3: 時間帯（営業時間内/営業時間外/深夜）
条件4: カード種別（キャッシュカード/クレジット/デビット）
条件5: セキュリティレベル（通常/要注意/警戒対象）

セキュリティ・業務ルール:
- 営業時間外は出金限度額制限（10万円まで）
- 深夜時間帯（23時-6時）は振込・高額取引停止
- 50万円以上の取引は本人確認強化
- 要注意・警戒対象は取引制限・監視強化
- クレジットカードはキャッシング枠の限度額適用
- デビットカードは口座残高まで
- 1日の累積取引限度額チェック
- 異常パターン検知時の自動停止
```

### 【作成課題】上級レベルの複雑判定
**Step1**: セキュリティ優先の条件整理
**Step2**: リスクレベル別の処理フロー設計
**Step3**: 実用的なデシジョンテーブル（階層化版）

**解答記録エリア:**

■ 全組み合わせ数: 5×4×3×3×3 = **540通り** ← 階層化必須！

■ セキュリティ重視の階層設計:

**Level1: セキュリティスクリーニング**

| 条件/アクション | 高リスク | 中リスク | 低リスク |
|-----------|------|------|------|
| セキュリティレベル | 警戒対象 | 要注意 | 通常 |
| 時間帯 | 深夜 | 営業時間外 | 営業時間内 |
| 取引金額 | ≥50万 | 10-50万 | <10万 |
| **処理方針** | **即停止** | **制限付き継続** | **通常処理** |

**Level2: 取引種別・金額判定**

| 条件/アクション | R1 | R2 | R3 | R4 | R5 | R6 | R7 | R8 |
|-----------|----|----|----|----|----|----|----|----|  
| 取引種別 | 残高照会 | 出金 | 出金 | 入金 | 振込 | 振込 | その他 | 出金 |
| 取引金額 | - | <10万 | ≥10万 | - | <50万 | ≥50万 | - | ≥50万 |
| 時間帯 | - | 営業内 | 営業外 | - | 営業内 | 営業内 | - | 深夜 |
| カード種別 | - | キャッシュ | キャッシュ | - | キャッシュ | キャッシュ | - | クレジット |
| セキュリティレベル | 通常 | 通常 | 通常 | 通常 | 通常 | 要注意 | 通常 | 通常 |
| **取引可否** | **○** | **○** | **○** | **○** | **○** | **×** | **○** | **×** |
| **追加認証** | **不要** | **不要** | **暗証再入力** | **不要** | **不要** | **-** | **生体認証** | **-** |
| **限度額** | **-** | **通常** | **10万まで** | **-** | **通常** | **-** | **個別設定** | **-** |
| **監視レベル** | **低** | **低** | **中** | **低** | **中** | **-** | **高** | **-** |

■ 複雑判定のポイント:
```
1. **階層化によるリスク管理**
   - Level1: セキュリティファースト（即座に危険判定）
   - Level2: 業務ルール適用（詳細な取引制御）
   - 段階的判定で処理負荷軽減

2. **時間帯による制限段階**
   - 営業時間内: 通常処理
   - 営業時間外: 制限付き（出金10万まで、振込一部制限）
   - 深夜時間帯: 高リスク取引停止

3. **金額・カード種別の連動制限**
   - キャッシュカード: 普通預金残高・1日限度額
   - クレジットカード: キャッシング枠・利用可能額
   - デビットカード: 口座残高のリアルタイム確認

4. **セキュリティレベル別の対応**
   - 通常: 標準的な業務ルール適用
   - 要注意: 高額取引・特殊取引時の追加確認
   - 警戒対象: 取引即停止・セキュリティ部門通知

5. **実装上の考慮事項**
   - 540パターン → 階層化で約20パターンに集約
   - パフォーマンス重視（高頻度アクセス）
   - 監査ログ・トレーサビリティ確保
   - 法令・規制要件（犯罪収益移転防止法等）への対応
```

---

## 🔗 関連ファイル
- **進捗記録**: `work-diary/projects/private_study/testing/`
- **前回学習**: 同値分割・境界値分析
- **次回学習**: 状態遷移テスト

---

## 🎯 【実践演習】解答チャレンジ

### 現在のステータス
- ✅ 演習1: 図書貸出システム（解答済み・理解確認済み）
- 🎯 **演習2: ECサイト注文システム（解答可能）**
- 🎯 **演習3: ATM取引システム（上級チャレンジ）**
- ✅ 実務適用ガイド作成済み

### 【学習継続プラン】

**推奨学習フロー:**
```
1. 演習2（ECサイト）の解答を作成
   - 4条件の組み合わせ整理
   - DON'T CARE活用の実践
   - ビジネスルール適用の練習

2. 演習3（ATM）の解答にチャレンジ
   - 5条件の複雑な階層化設計
   - セキュリティ要件の実装
   - 実務レベルの完全習得

3. 他技法との組み合わせ学習
   - 同値分割・境界値分析との連携
   - 状態遷移テストへの発展
```

**次回学習時の推奨アクション:**
> 演習2のECサイト問題で、自分なりのデシジョンテーブルを作成してみましょう。  
> 256パターンをどう10パターンに削減するか、実務的な思考プロセスを体験できます。

---

## 📚 学習効果測定

### 現在の習得レベル評価
- **基本概念**: ✅ 完全理解（図書貸出システム解答可能）
- **実務レベル**: 🎯 **学習中**（ECサイト演習で習得）
- **上級レベル**: 📝 挑戦可能（ATM演習で到達）

### 実務活用シミュレーション
```
Laravelプロジェクトでの活用例:
├─ ユーザー権限管理システム
├─ 商品価格・割引計算ロジック  
├─ ワークフロー承認システム
└─ バリデーション・業務ルール実装

→ 演習2,3完了で即戦力レベル到達
```

---

## 🔗 関連学習リソース
- **進捗記録**: `work-diary/projects/private_study/testing/session_20250907_decision_table_advanced.md`
- **前回基礎学習**: `02_理論学習・基本演習.md`
- **次回発展学習**: `../boundary_value_analysis/integration_techniques.md`
- **実務適用**: `06_実務適用ガイド.md`

**学習完了目標**: ECサイト・ATM演習で実務レベルのデシジョンテーブル作成スキル習得
